{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "definitions": {
    "alias": {
      "additionalProperties": false,
      "properties": {
        "alias_of": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "doc_fift": {
          "type": "string"
        },
        "doc_stack": {
          "type": "string"
        },
        "mnemonic": {
          "type": "string"
        },
        "operands": {
          "additionalProperties": {
            "type": [
              "number",
              "string"
            ]
          },
          "type": "object"
        }
      },
      "required": [
        "mnemonic",
        "alias_of",
        "operands"
      ],
      "type": "object"
    },
    "code_location": {
      "additionalProperties": false,
      "properties": {
        "commit": {
          "type": "string"
        },
        "function_name": {
          "type": "string"
        },
        "line": {
          "type": "number"
        },
        "path": {
          "type": "string"
        }
      },
      "required": [
        "path",
        "line"
      ],
      "type": "object"
    },
    "continuation": {
      "anyOf": [
        {
          "$ref": "#/definitions/continuation_cc"
        },
        {
          "$ref": "#/definitions/continuation_variable"
        },
        {
          "$ref": "#/definitions/continuation_register"
        },
        {
          "$ref": "#/definitions/continuation_special_until"
        },
        {
          "$ref": "#/definitions/continuation_special_while"
        },
        {
          "$ref": "#/definitions/continuation_special_again"
        },
        {
          "$ref": "#/definitions/continuation_special_repeat"
        },
        {
          "$ref": "#/definitions/continuation_special_pushint"
        },
        {
          "$ref": "#/definitions/continuation_fallback"
        }
      ]
    },
    "continuation_cc": {
      "additionalProperties": false,
      "properties": {
        "save": {
          "$ref": "#/definitions/save_list"
        },
        "type": {
          "const": "cc",
          "type": "string"
        }
      },
      "required": [
        "type",
        "save"
      ],
      "type": "object"
    },
    "continuation_fallback": {
      "type": "object"
    },
    "continuation_register": {
      "additionalProperties": false,
      "properties": {
        "index": {
          "type": "number"
        },
        "save": {
          "$ref": "#/definitions/save_list"
        },
        "type": {
          "const": "register",
          "type": "string"
        }
      },
      "required": [
        "type",
        "index"
      ],
      "type": "object"
    },
    "continuation_special_again": {
      "additionalProperties": false,
      "properties": {
        "args": {
          "additionalProperties": false,
          "properties": {
            "body": {
              "$ref": "#/definitions/continuation"
            }
          },
          "required": [
            "body"
          ],
          "type": "object"
        },
        "name": {
          "const": "again",
          "type": "string"
        },
        "type": {
          "const": "special",
          "type": "string"
        }
      },
      "required": [
        "type",
        "name",
        "args"
      ],
      "type": "object"
    },
    "continuation_special_pushint": {
      "additionalProperties": false,
      "properties": {
        "args": {
          "additionalProperties": false,
          "properties": {
            "next": {
              "$ref": "#/definitions/continuation"
            },
            "value": {
              "type": "number"
            }
          },
          "required": [
            "value",
            "next"
          ],
          "type": "object"
        },
        "name": {
          "const": "pushint",
          "type": "string"
        },
        "type": {
          "const": "special",
          "type": "string"
        }
      },
      "required": [
        "type",
        "name",
        "args"
      ],
      "type": "object"
    },
    "continuation_special_repeat": {
      "additionalProperties": false,
      "properties": {
        "args": {
          "additionalProperties": false,
          "properties": {
            "after": {
              "$ref": "#/definitions/continuation"
            },
            "body": {
              "$ref": "#/definitions/continuation"
            },
            "count": {
              "$ref": "#/definitions/var_name"
            }
          },
          "required": [
            "count",
            "body",
            "after"
          ],
          "type": "object"
        },
        "name": {
          "const": "repeat",
          "type": "string"
        },
        "type": {
          "const": "special",
          "type": "string"
        }
      },
      "required": [
        "type",
        "name",
        "args"
      ],
      "type": "object"
    },
    "continuation_special_until": {
      "additionalProperties": false,
      "properties": {
        "args": {
          "additionalProperties": false,
          "properties": {
            "after": {
              "$ref": "#/definitions/continuation"
            },
            "body": {
              "$ref": "#/definitions/continuation"
            }
          },
          "required": [
            "body",
            "after"
          ],
          "type": "object"
        },
        "name": {
          "const": "until",
          "type": "string"
        },
        "type": {
          "const": "special",
          "type": "string"
        }
      },
      "required": [
        "type",
        "name",
        "args"
      ],
      "type": "object"
    },
    "continuation_special_while": {
      "additionalProperties": false,
      "properties": {
        "args": {
          "additionalProperties": false,
          "properties": {
            "after": {
              "$ref": "#/definitions/continuation"
            },
            "body": {
              "$ref": "#/definitions/continuation"
            },
            "cond": {
              "$ref": "#/definitions/continuation"
            }
          },
          "required": [
            "cond",
            "body",
            "after"
          ],
          "type": "object"
        },
        "name": {
          "const": "while",
          "type": "string"
        },
        "type": {
          "const": "special",
          "type": "string"
        }
      },
      "required": [
        "type",
        "name",
        "args"
      ],
      "type": "object"
    },
    "continuation_variable": {
      "additionalProperties": false,
      "properties": {
        "save": {
          "$ref": "#/definitions/save_list"
        },
        "type": {
          "const": "variable",
          "type": "string"
        },
        "var_name": {
          "$ref": "#/definitions/var_name"
        }
      },
      "required": [
        "type",
        "var_name",
        "save"
      ],
      "type": "object"
    },
    "display_hint": {
      "anyOf": [
        {
          "additionalProperties": false,
          "properties": {
            "type": {
              "const": "continuation",
              "type": "string"
            }
          },
          "required": [
            "type"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "size_var": {
              "$ref": "#/definitions/var_name"
            },
            "type": {
              "const": "dictionary",
              "type": "string"
            }
          },
          "required": [
            "type",
            "size_var"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "type": {
              "const": "add",
              "type": "string"
            },
            "value": {
              "type": "number"
            }
          },
          "required": [
            "type",
            "value"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "type": {
              "const": "stack",
              "type": "string"
            }
          },
          "required": [
            "type"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "type": {
              "const": "register",
              "type": "string"
            }
          },
          "required": [
            "type"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "type": {
              "const": "pushint4",
              "type": "string"
            }
          },
          "required": [
            "type"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "type": {
              "const": "optional_nargs",
              "type": "string"
            }
          },
          "required": [
            "type"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "type": {
              "const": "plduz",
              "type": "string"
            }
          },
          "required": [
            "type"
          ],
          "type": "object"
        }
      ]
    },
    "display_hints": {
      "items": {
        "$ref": "#/definitions/display_hint"
      },
      "type": "array"
    },
    "instruction": {
      "additionalProperties": false,
      "properties": {
        "bytecode": {
          "additionalProperties": false,
          "properties": {
            "operands": {
              "items": {
                "$ref": "#/definitions/operand"
              },
              "type": "array"
            },
            "operands_range_check": {
              "additionalProperties": false,
              "properties": {
                "from": {
                  "type": "number"
                },
                "length": {
                  "type": "number"
                },
                "to": {
                  "type": "number"
                }
              },
              "required": [
                "length",
                "from",
                "to"
              ],
              "type": "object"
            },
            "prefix": {
              "type": "string"
            },
            "tlb": {
              "type": "string"
            }
          },
          "required": [
            "tlb",
            "prefix",
            "operands"
          ],
          "type": "object"
        },
        "control_flow": {
          "additionalProperties": false,
          "properties": {
            "branches": {
              "items": {
                "$ref": "#/definitions/continuation"
              },
              "type": "array"
            },
            "nobranch": {
              "type": "boolean"
            }
          },
          "required": [
            "branches",
            "nobranch"
          ],
          "type": "object"
        },
        "doc": {
          "additionalProperties": false,
          "properties": {
            "category": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "fift": {
              "type": "string"
            },
            "fift_examples": {
              "items": {
                "additionalProperties": false,
                "properties": {
                  "description": {
                    "type": "string"
                  },
                  "fift": {
                    "type": "string"
                  }
                },
                "required": [
                  "fift",
                  "description"
                ],
                "type": "object"
              },
              "type": "array"
            },
            "gas": {
              "type": "string"
            },
            "opcode": {
              "type": "string"
            },
            "stack": {
              "type": "string"
            }
          },
          "required": [
            "stack",
            "category",
            "description",
            "gas",
            "fift",
            "fift_examples"
          ],
          "type": "object"
        },
        "implementation": {
          "description": "Implementation details: where this instruction is implemented in the code.",
          "items": {
            "$ref": "#/definitions/code_location"
          },
          "type": "array"
        },
        "mnemonic": {
          "type": "string"
        },
        "since_version": {
          "type": "number"
        },
        "value_flow": {
          "additionalProperties": false,
          "properties": {
            "inputs": {
              "$ref": "#/definitions/values"
            },
            "outputs": {
              "$ref": "#/definitions/values"
            }
          },
          "required": [
            "inputs",
            "outputs"
          ],
          "type": "object"
        }
      },
      "required": [
        "mnemonic",
        "since_version",
        "doc",
        "bytecode",
        "value_flow",
        "control_flow",
        "implementation"
      ],
      "type": "object"
    },
    "operand": {
      "anyOf": [
        {
          "$ref": "#/definitions/operand_uint"
        },
        {
          "$ref": "#/definitions/operand_int"
        },
        {
          "$ref": "#/definitions/operand_pushint_long"
        },
        {
          "$ref": "#/definitions/operand_ref"
        },
        {
          "$ref": "#/definitions/operand_subslice"
        }
      ]
    },
    "operand_int": {
      "additionalProperties": false,
      "properties": {
        "display_hints": {
          "$ref": "#/definitions/display_hints"
        },
        "max_value": {
          "type": "number"
        },
        "min_value": {
          "type": "number"
        },
        "name": {
          "$ref": "#/definitions/var_name"
        },
        "size": {
          "type": "number"
        },
        "type": {
          "const": "int",
          "type": "string"
        }
      },
      "required": [
        "name",
        "type",
        "display_hints",
        "size",
        "max_value",
        "min_value"
      ],
      "type": "object"
    },
    "operand_pushint_long": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "$ref": "#/definitions/var_name"
        },
        "type": {
          "const": "pushint_long",
          "type": "string"
        }
      },
      "required": [
        "name",
        "type"
      ],
      "type": "object"
    },
    "operand_ref": {
      "additionalProperties": false,
      "properties": {
        "display_hints": {
          "$ref": "#/definitions/display_hints"
        },
        "name": {
          "$ref": "#/definitions/var_name"
        },
        "type": {
          "const": "ref",
          "type": "string"
        }
      },
      "required": [
        "name",
        "type",
        "display_hints"
      ],
      "type": "object"
    },
    "operand_subslice": {
      "additionalProperties": false,
      "properties": {
        "bits_length_var_size": {
          "type": "number"
        },
        "bits_padding": {
          "type": "number"
        },
        "completion_tag": {
          "type": "boolean"
        },
        "display_hints": {
          "$ref": "#/definitions/display_hints"
        },
        "max_bits": {
          "type": "number"
        },
        "max_refs": {
          "type": "number"
        },
        "min_bits": {
          "type": "number"
        },
        "min_refs": {
          "type": "number"
        },
        "name": {
          "$ref": "#/definitions/var_name"
        },
        "refs_add": {
          "type": "number"
        },
        "refs_length_var_size": {
          "type": "number"
        },
        "type": {
          "const": "subslice",
          "type": "string"
        }
      },
      "required": [
        "name",
        "type",
        "display_hints",
        "bits_length_var_size",
        "bits_padding",
        "completion_tag",
        "max_bits",
        "min_bits",
        "max_refs",
        "min_refs"
      ],
      "type": "object"
    },
    "operand_uint": {
      "additionalProperties": false,
      "properties": {
        "display_hints": {
          "$ref": "#/definitions/display_hints"
        },
        "max_value": {
          "type": "number"
        },
        "min_value": {
          "type": "number"
        },
        "name": {
          "$ref": "#/definitions/var_name"
        },
        "size": {
          "type": "number"
        },
        "type": {
          "const": "uint",
          "type": "string"
        }
      },
      "required": [
        "name",
        "type",
        "display_hints",
        "size",
        "max_value",
        "min_value"
      ],
      "type": "object"
    },
    "register_flow": {
      "anyOf": [
        {
          "additionalProperties": false,
          "properties": {
            "index": {
              "type": "number"
            },
            "type": {
              "const": "constant",
              "type": "string"
            }
          },
          "required": [
            "type",
            "index"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "type": {
              "const": "variable",
              "type": "string"
            },
            "var_name": {
              "$ref": "#/definitions/var_name"
            }
          },
          "required": [
            "type",
            "var_name"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "name": {
              "enum": [
                "gas",
                "cstate"
              ],
              "type": "string"
            },
            "type": {
              "const": "special",
              "type": "string"
            }
          },
          "required": [
            "type",
            "name"
          ],
          "type": "object"
        }
      ]
    },
    "save_list": {
      "additionalProperties": false,
      "properties": {
        "c0": {
          "$ref": "#/definitions/continuation"
        },
        "c1": {
          "$ref": "#/definitions/continuation"
        },
        "c2": {
          "$ref": "#/definitions/continuation"
        },
        "c3": {
          "$ref": "#/definitions/continuation"
        }
      },
      "type": "object"
    },
    "stack": {
      "items": {
        "$ref": "#/definitions/stack_entry"
      },
      "type": "array"
    },
    "stack_entry": {
      "anyOf": [
        {
          "$ref": "#/definitions/stack_entry_simple"
        },
        {
          "$ref": "#/definitions/stack_entry_const"
        },
        {
          "$ref": "#/definitions/stack_entry_conditional"
        },
        {
          "$ref": "#/definitions/stack_entry_array"
        }
      ]
    },
    "stack_entry_array": {
      "additionalProperties": false,
      "properties": {
        "array_entry": {
          "$ref": "#/definitions/stack"
        },
        "length_var": {
          "$ref": "#/definitions/var_name"
        },
        "name": {
          "$ref": "#/definitions/var_name"
        },
        "type": {
          "const": "array",
          "type": "string"
        }
      },
      "required": [
        "type",
        "name",
        "length_var",
        "array_entry"
      ],
      "type": "object"
    },
    "stack_entry_conditional": {
      "additionalProperties": false,
      "properties": {
        "else": {
          "$ref": "#/definitions/stack"
        },
        "match": {
          "items": {
            "$ref": "#/definitions/stack_match_arm"
          },
          "type": "array"
        },
        "name": {
          "$ref": "#/definitions/var_name"
        },
        "type": {
          "const": "conditional",
          "type": "string"
        }
      },
      "required": [
        "type",
        "name",
        "match"
      ],
      "type": "object"
    },
    "stack_entry_const": {
      "additionalProperties": false,
      "properties": {
        "type": {
          "const": "const",
          "type": "string"
        },
        "value": {
          "type": [
            "number",
            "null"
          ]
        },
        "value_type": {
          "enum": [
            "Integer",
            "Null"
          ],
          "type": "string"
        }
      },
      "required": [
        "type",
        "value_type",
        "value"
      ],
      "type": "object"
    },
    "stack_entry_simple": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "$ref": "#/definitions/var_name"
        },
        "type": {
          "const": "simple",
          "type": "string"
        },
        "value_types": {
          "items": {
            "enum": [
              "Integer",
              "Cell",
              "Builder",
              "Slice",
              "Tuple",
              "Continuation",
              "Null"
            ],
            "type": "string"
          },
          "type": "array"
        }
      },
      "required": [
        "type",
        "name"
      ],
      "type": "object"
    },
    "stack_match_arm": {
      "additionalProperties": false,
      "properties": {
        "stack": {
          "$ref": "#/definitions/stack"
        },
        "value": {
          "type": "number"
        }
      },
      "required": [
        "value",
        "stack"
      ],
      "type": "object"
    },
    "values": {
      "additionalProperties": false,
      "properties": {
        "registers": {
          "items": {
            "$ref": "#/definitions/register_flow"
          },
          "type": "array"
        },
        "stack": {
          "$ref": "#/definitions/stack"
        }
      },
      "required": [
        "registers"
      ],
      "type": "object"
    },
    "var_name": {
      "type": "string"
    }
  },
  "properties": {
    "$schema": {
      "type": "string"
    },
    "aliases": {
      "items": {
        "$ref": "#/definitions/alias"
      },
      "type": "array"
    },
    "instructions": {
      "items": {
        "$ref": "#/definitions/instruction"
      },
      "type": "array"
    }
  },
  "required": [
    "instructions",
    "aliases"
  ],
  "type": "object"
}